<div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">
        {{ 'Talent.EditProfile.Title' | translate }}
    </h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="dismiss('Cross click')"></button>
</div>

<div class="modal-body">
    <div class="row">
        <div class="col-md-12">
            @if (isLoading) {
            <!-- Spinner -->
            <be-loader />
            } @else {
            <form [formGroup]="profileForm" (ngSubmit)="saveProfile()">
                <!-- Line 1: Profile picture -->
                <div class="row mt-3">
                    <div class="col-md-12 profile-picture-section">
                        <div>
                            <img [src]="profilePicture" class="img-thumbnail mb-2">

                            <!-- Custom button to trigger file input -->
                            <button type="button" class="btn btn-primary btn-md mt-2 ms-3 me-3"
                                (click)="fileInput.click()">
                                <i class="fa-regular fa-image me-2"></i>
                                {{ 'Talent.EditProfile.ChoosePicture' | translate }}
                            </button>

                            <!-- Button to remove current image -->
                            <button type="button" class="btn btn-danger btn-md mt-2" (click)="removeImage()"
                                *ngIf="profilePicture && !defaultProfilePicture">
                                <i class="fa-regular fa-trash-can me-2"></i>
                                {{ 'Talent.EditProfile.Remove' | translate }}
                            </button>

                            <!-- Hidden file input element -->
                            <input type="file" #fileInput (change)="onFileSelected($event)" class="display-none">
                        </div>

                    </div>
                </div>
                <!-- Line 2: Full name -->
                <div class="row mt-3">
                    <app-full-name-input [form]="profileForm" />
                </div>
                <!-- Line 3: Profile title -->
                <div class="row mt-3">
                    <!-- Profile title -->
                    <div class="col-md-12">
                        <be-text-float-input [form]="profileForm" [controlName]="'profileTitle'"
                            [id]="'inputProfileTitle'" [label]="'Talent.EditProfile.ProfileTitle'" [hasIcon]="true"
                            [iconClass]="'fa-regular fa-address-card'" />
                    </div>
                </div>
                <!-- Line 4: Summary -->
                <div class="row mt-3">
                    <!-- Summary -->
                    <div class="col-md-12">
                        <be-text-area-float-input [form]="profileForm" [controlName]="'summary'"
                            [id]="'inputSummaryFloat'" [label]="'Talent.EditProfile.Summary'" [hasIcon]="true"
                            [iconClass]="'fa-regular fa-clipboard'" [height]="'150px'" />
                    </div>
                </div>
                <!-- Line 5: Email/Website/LinkedIn-->
                <div class="row mt-3">
                    <!-- Email -->
                    <div class="col-md-4">
                        <be-email-input [form]="profileForm" />
                    </div>
                    <!-- WebSite -->
                    <div class="col-md-4">
                        <be-text-float-input [form]="profileForm" [controlName]="'website'" [id]="'inputWebsite'"
                            [label]="'Talent.EditProfile.Website'" [hasIcon]="true" [iconClass]="'fa-solid fa-link'"
                            [errorMessageKey]="'Talent.EditProfile.Validation.Website'" />
                    </div>
                    <!-- LinkedIn -->
                    <div class="col-md-4">
                        <be-text-float-input [form]="profileForm" [controlName]="'linkedIn'" [id]="'inputLinkedIn'"
                            [label]="'Talent.EditProfile.LinkedIn'" [hasIcon]="true"
                            [iconClass]="'fa-brands fa-linkedin'"
                            [errorMessageKey]="'Talent.EditProfile.Validation.LinkedIn'" />
                    </div>
                </div>
                <!-- Line 6: Date of birth & Phone-->
                <div class="row mt-3">
                    <!-- Date of birth -->
                    <div class="col-md-6">
                        <be-date-picker-input [form]="profileForm" [label]="'Talent.EditProfile.DateOfBirth'"
                            [controlName]="'dateOfBirth'" id="inputDateOfBirth" />
                    </div>
                    <!-- Phone -->
                    <div class="col-md-4">
                        <be-phone-input [form]="profileForm" />
                    </div>
                </div>
                <!-- Line 7: Address -->
                <be-address-group *ngIf="!isLoading" [form]="profileForm" [isCompany]="false" />

                <!-- Line 8: Buttons -->
                <div class="row mt-3">
                    <!-- Save button -->
                    <div class="col-md-12 d-flex justify-content-center align-items-center">
                        <button type="submit" class="btn btn-primary w-25" [disabled]="isSaving">
                            <i class="me-2"
                                [ngClass]="{'fa fa-spin fa-spinner': isSaving, 'fa-solid fa-floppy-disk': !isSaving }"></i>
                            {{ 'BUTTON.SAVE' | translate }}
                        </button>
                    </div>
                </div>
            </form>
            }
        </div>
    </div>
</div>